<!DOCTYPE html>
<html>
<head>
    <title>Global Exposure Test</title>
</head>
<body>
    <h1>Testing Global Exposure</h1>
    <div id="output"></div>

    <script type="module">
        const output = document.getElementById('output');

        output.textContent = 'Loading SDK...';
        console.log('Loading SDK...');

        // Import the SDK
        import('./dist/index.js').then(() => {
            output.textContent = 'SDK loaded, waiting for global exposure...';
            console.log('SDK loaded, checking global exposure...');

            // Wait for global exposure
            setTimeout(() => {
                if (window.CoreGaming) {
                    output.textContent = '‚úÖ SUCCESS: window.CoreGaming available!';
                    console.log('‚úÖ SUCCESS: window.CoreGaming available!', Object.keys(window.CoreGaming));

                    if (window.CoreGaming.Game && window.CoreGaming.GameRegistry && window.CoreGaming.RegistryInstance) {
                        output.innerHTML += '<br>‚úÖ All core classes exposed globally';

                        // Test creating a game
                        class TestGame extends window.CoreGaming.Game {
                            constructor() {
                                super('test', 'https://test.com', 'üß™');
                            }
                            getScriptsLoadedEvent() { return 'test-scripts-loaded'; }
                            getGradient() { return 'linear-gradient(45deg, #ff0000, #00ff00)'; }
                        }

                        const testGame = new TestGame();
                        window.CoreGaming.RegistryInstance.registerGame(testGame);

                        const games = window.CoreGaming.RegistryInstance.getAllGames();
                        output.innerHTML += `<br>‚úÖ Test game registered. Total games: ${games.length}`;
                        console.log('‚úÖ Test successful!');
                    } else {
                        output.innerHTML += '<br>‚ùå Missing core classes';
                    }
                } else {
                    output.textContent = '‚ùå FAILED: window.CoreGaming not available';
                    console.error('‚ùå FAILED: window.CoreGaming not available');
                }
            }, 100);
        }).catch(err => {
            output.textContent = '‚ùå Import failed: ' + err.message;
            console.error('Import error:', err);
        });
    </script>
</body>
</html>
